

### SWAT official [site](https://swat.tamu.edu/)


### SWAT model
The SWAT model is a process-based semi-distributed, Hydrological Response Unit (HRU)-based, spatially explicit, and time-continuous hydrological model developed by the agricultural research service of the United States Department of Agriculture (Arnold et al. 1998). SWAT model divide the large basins into smaller sub-basins to provide more accurate spatial details, which make the model more reliable and accurate (Jha, 2004). SWAT model was designed to simulate as well as forecast the impacts of agricultural and land management decision/practices on water resources in terms of quantity and water quality across a range of basins sizes (Gassman et al. 2007). Further, the hydrological responses to land use and climate changes are mostly investigated using the scenario-based simulations through SWAT model (Yin et al. 2017). The computational efficiency of SWAT model makes the simulation across large basins or different types of management strategies easy (Coutu and Vega, 2007). In this research, ArcSWAT version 2012, revision 664 was used to simulate streamflow in UIB. Generally, the SWAT model is extensively used in water quality assessment, simulation of rainfall-runoff processes, evapotranspiration, and soil erosion. SWAT has the potential to assess climate change impact on water resources, transport of nutrients and sediments under the various circumstances of land use land cover (LULC), meteorological, and soil data (Ali et al. 2020; Khan et al. 2018; Marahatta et al. 2021; Song et al. 2011; Tuo et al. 2016).

The operating mechanism of SWAT model includes the division of entire basins into several sub-basins and finally into HRUs (which is a distinctive combination of slope, LULC, and soil type) based on digital elevation model (DEM). SWAT model generate HRUs using two methods, i.e., generate HRUs for individual sub-basin using the soil and LULC information and multiple HRUs based on threshold values (Arnold et al. 1998). As recommended by Setegn et al. (2009), the current study used 10%, 20%, and 10% threshold for land, soil and slope, respectively. After the successful overlaying of soil, slope, and LULC datasets, the number of sub-basins (HRUs) generated by SWAT model for Gilgit, Hunza, Shatial bridge, Yugo, Doyian, and Bisham Qila are 12 (22), 10 (18), 24 (45), 6 (10), 5 (8), and 9 (17), respectively.

SWAT model has two distinct phases, which are named as land and routing phases. The daily precipitation is used by SWAT model to simulate surface runoff for each HRU using the Soil Conservation Service (SCS) technique during the land phase hydrological component (USDA, 1972). Green and Ampt infiltration method (Green and Ampt, 1911) is the alternative method to SCS in the SWAT model to simulate surface runoff. Green and Ampt infiltration method require precipitation inputs on a sub-daily scale. Simulated streamflow is routed during the routing phase through streams/river network to the basin outlet using Muskingum or Variable storage techniques.

- Don Comis(2010)[Water Quality Model Passes Another Test (SWAT)](https://www.ars.usda.gov/news-events/news/research-news/2010/water-quality-model-passes-another-test/)



### CMake rebuild
- source：[Kitware](https://github.com/Kitware/CMake)
- git clone, bootstrap and make install
- [不能在mountted directory](https://blog.csdn.net/keineahnung2345/article/details/105368486)進行編譯
  - df -h顯示最左欄是/dev/sd...，最右欄即為mountted directory，如/nas?、/home
  - 可以在/opt安裝，使用時要將CMAQ_ROOT指向/opt/CMake

### SWAT2010
- halt in ld process...
- [copy the built tar](https://slackware.pkgs.org/14.1/slackware-x86_64/gcc-gfortran-4.8.2-x86_64-1.txz.html)：
  - get tarball：`wget --no-check-certificate https://slackware.uk/slackware/slackware64-14.1/slackware64/d/gcc-gfortran-4.8.2-x86_64-1.txz` 
  - unpack, locate the .a file and `sudo cp ./usr/lib64/libgfortran.a /usr/lib64/libgfortran.a`

### swatplus
- [unofficial site](https://github.com/joelz575/swatplus)
- 會用到
  - [valgrind](https://valgrind.org/)  
  - [poetry](https://python-poetry.org/docs/managing-environments/) Managing environments
    - [installation with pip](https://python-poetry.org/docs/#installing-with-pipx)


```bash
#kuang@node03 /home/SWAT/SWAT/build/src
#$ sh ./CMakeFiles/swat.dir/link.txt
/usr/bin/ld: cannot find -lgfortran
/usr/bin/ld: cannot find -lm
/usr/bin/ld: cannot find -lquadmath
/usr/bin/ld: cannot find -lm
/usr/bin/ld: cannot find -lc
collect2: error: ld returned 1 exit status
```

### SWATplusR
- [SWATplusR](https://chrisschuerz.github.io/SWATplusR/articles/SWATplusR.html#figures)

```
wget https://cran.r-project.org/src/base/R-4/R-4.2.2.tar.gz
```
- [other procedure](https://www.kombitz.com/2022/03/02/how-to-manually-install-r-4-1-2-on-centos-7/)
- [readline](https://davetang.org/muse/2018/02/06/compiling-r-gnu-readline/)：`--with-readline=yes (default) and headers/libs are not available`
- [SWATdata revision](https://github.com/chrisschuerz/SWATdata#swatdata-)
- [First SWAT model runs](https://chrisschuerz.github.io/SWATplusR/articles/SWATplusR.html#figures)


```R
# If the package remotes is not installed run first:
install.packages("remotes")
# install the SWAT+ package
remotes::install_github("chrisschuerz/SWATplusR")
# if something not found, install them
install.packages("data.table")
# and redo
remotes::install_github("chrisschuerz/SWATplusR")
install.packages("...")
remotes::install_github("chrisschuerz/SWATplusR")
remotes::install_github("chrisschuerz/SWATdata")

library(SWATplusR)
demo_path <- "Define:/home/SWAT/data59"
path_plus <- load_demo(dataset = "project", path = demo_path, version = "plus",)#  revision = 59.3)
q_obs <- load_demo(dataset = "observation")
q_obs
plot(q_obs, type = 'l')
```

[wiki]: <https://en.wikipedia.org/wiki/Soil_and_Water_Assessment_Tool> "Soil and Water Assessment Tool (SWAT) is a free and open source hydrology model and GIS computer simulation sponsored by the USDA(U.S. DEPARTMENT OF AGRICULTURE). SWAT is a well known geographic hydrological model in use by many universities and government agencies around the world, and integrates with commercial products like ArcGIS."
[Arnold et al. 1998]: <> "Arnold, J.G., Srinivasan, R., Muttiah, R.S., and Williams, J.R. (1998). LARGE AREA HYDROLOGIC MODELING AND ASSESSMENT PART I: MODEL DEVELOPMENT1. JAWRA Journal of the American Water Resources Association 34 (1):73–89. doi:10.1111/j.1752-1688.1998.tb05961.x."


